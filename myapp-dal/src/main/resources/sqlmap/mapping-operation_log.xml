<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mycompany.myapp.dao.OperationLogDAO">
    <resultMap id="BaseResultMap" type="OperationLog">
        <id column="id" property="id"/>
        <result column="gmt_create" property="gmtCreate"/>
        <result column="gmt_modified" property="gmtModified"/>
        <result column="operator_id" property="operatorId"/>
        <result column="operation_type" property="operationType"/>
        <result column="source_id" property="sourceId"/>
        <result column="source_code" property="sourceCode"/>
        <result column="source_type" property="sourceType"/>
        <result column="status" property="status"/>
        <result column="status_text" property="statusText"/>
        <result column="remark" property="remark"/>
    </resultMap>

    <sql id="baseColumn">
		id,gmt_create,gmt_modified,operator_id,operation_type,source_id,source_code,source_type,status,status_text,remark
	</sql>

    <sql id="queryParams">
        <where>
            <if test="id !=null">
                and id=#{id}
            </if>
            <if test="gmtCreate !=null">
                and gmt_create=#{gmtCreate}
            </if>
            <if test="gmtModified !=null">
                and gmt_modified=#{gmtModified}
            </if>
            <if test="operatorId !=null">
                and operator_id=#{operatorId}
            </if>
            <if test="operationType !=null">
                and operation_type=#{operationType}
            </if>
            <if test="sourceId !=null">
                and source_id=#{sourceId}
            </if>
            <if test="sourceCode !=null">
                and source_code=#{sourceCode}
            </if>
            <if test="sourceType !=null">
                and source_type=#{sourceType}
            </if>
            <if test="status !=null">
                and status=#{status}
            </if>
            <if test="statusText !=null">
                and status_text=#{statusText}
            </if>
            <if test="remark !=null">
                and remark=#{remark}
            </if>
        </where>
    </sql>

    <sql id="orderBy">
    </sql>

    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
		insert into operation_log (gmt_create,gmt_modified,operator_id,operation_type,source_id,source_code,source_type,status,status_text,remark) values
		(now(),now(),#{operatorId},#{operationType},#{sourceId},#{sourceCode},#{sourceType},#{status},#{statusText},#{remark})
	</insert>

    <insert id="batchInsert">
        insert into operation_log (gmt_create,gmt_modified,operator_id,operation_type,source_id,source_code,source_type,status,status_text,remark)
        values
        <foreach collection="list" item="item" separator=",">
            (now(),now(),#{item.operatorId},#{item.operationType},#{item.sourceId},#{item.sourceCode},#{item.sourceType},#{item.status},#{item.statusText},#{item.remark})
        </foreach>
    </insert>

    <update id="update">
		update operation_log
		set gmt_create=#{gmtCreate},gmt_modified=now(),operator_id=#{operatorId},operation_type=#{operationType},source_id=#{sourceId},source_code=#{sourceCode},source_type=#{sourceType},status=#{status},status_text=#{statusText},remark=#{remark}
		where id = #{id}
	</update>

    <delete id="delete">
        delete from operation_log where id = #{id}
    </delete>

    <delete id="batchDelete">
        delete from operation_log
        <where>
            <choose>
                <when test="list != null and list.size()>0">
                    id in
                    <foreach collection="list" item="id" separator="," open="(" close=")">
                        #{id}
                    </foreach>
                </when>
                <otherwise>
                    1=0
                </otherwise>
            </choose>
        </where>
    </delete>

    <select id="getById" resultMap="BaseResultMap">
        select
        <include refid="baseColumn"/>
        from operation_log
        where id = #{id}
    </select>

    <select id="queryByIds" resultMap="BaseResultMap">
        select
        <include refid="baseColumn"/>
        from operation_log
        <where>
            <choose>
                <when test="list != null and list.size()>0">
                    id in
                    <foreach collection="list" item="id" separator="," open="(" close=")">
                        #{id}
                    </foreach>
                </when>
                <otherwise>
                    1=0
                </otherwise>
            </choose>
        </where>
    </select>

    <select id="queryList" resultMap="BaseResultMap">
        select
        <include refid="baseColumn"/>
        from operation_log
        <include refid="queryParams"/>
        <include refid="orderBy"/>
    </select>

    <select id="count" resultType="int">
        select count(1) from operation_log
        <include refid="queryParams"/>
    </select>

    <select id="queryPage" resultMap="BaseResultMap">
        select
        <include refid="baseColumn"/>
        from operation_log
        <include refid="queryParams"/>
    </select>

</mapper>